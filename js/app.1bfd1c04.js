(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],d=0,p=[];d<c.length;d++)a=c[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==i[s]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vue-websql-tudushki/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"17f8":function(e,t,n){},4990:function(e,t,n){},"4e5c":function(e,t,n){},"4fa1":function(e,t,n){"use strict";var r=n("4990"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("div",{staticClass:"app__title"},[e._v(" Тудушки ")]),e.isWebSqlSupported?[n("div",{staticClass:"app__actions"},[n("button",{on:{click:function(t){return e.addGroup()}}},[e._v(" Добавить группу ")])]),n("filters"),n("board")]:n("div",{staticClass:"app__unsupported"},[e._m(0),e._m(1),n("p",[e._v(" Приходите сюда с поддерживаемым браузером. ")])])],2)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" В вашем браузере приложение работать не может. "),n("b",[e._v("Скорее всего у вас не поддерживается Web SQL.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v(" Проверить это, а также узнать, в каких браузерах поддерживается Web SQL, можно "),n("a",{attrs:{href:"https://caniuse.com/#search=web%20sql",target:"_blank"}},[e._v("здесь")]),e._v(". ")])}],a=(n("96cf"),n("1da1")),c=(n("d3b7"),n("d4ec")),s=n("bee2"),u=(n("d81d"),n("5530")),l=n("45eb"),d=n("7e84"),p=n("262e"),f=n("2caf"),v=(n("99af"),n("a630"),n("a15b"),n("b64b"),n("07ac"),n("3ca3"),n("2909")),m=n("3835"),h=function(){function e(t,n){Object(c["a"])(this,e),this._db=t,this._name=n}return Object(s["a"])(e,[{key:"init",value:function(){}},{key:"readItems",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._db.query("select * from ".concat(this._name));case 2:return t=e.sent,n=t.rows,e.abrupt("return",Array.from(n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,o,a,c,s,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{},n=[Object.keys(t).join(", "),Object.values(t)],r=n[0],i=n[1],o=i.map((function(){return"?"})).join(", "),!i.length){e.next=9;break}return e.next=6,this._db.query("insert into ".concat(this._name," (").concat(r,") values (").concat(o,")"),i);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,this._db.query("insert into ".concat(this._name," default values"));case 11:e.t0=e.sent;case 12:return a=e.t0,c=a.insertId,e.next=16,this._db.query("select * from ".concat(this._name," where id = ?"),[c]);case 16:return s=e.sent,u=Object(m["a"])(s.rows,1),l=u[0],e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,o,a,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t,n),r=[Object.keys(n).map((function(e){return"".concat(e," = ?")})).join(", "),Object.values(n)],i=r[0],o=r[1],e.next=4,this._db.query("update ".concat(this._name," set ").concat(i," where id = ?"),[].concat(Object(v["a"])(o),[t]));case 4:return e.next=6,this._db.query("select * from ".concat(this._name," where id = ?"),[t]);case 6:return a=e.sent,c=Object(m["a"])(a.rows,1),s=c[0],e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._db.query("delete from ".concat(this._name," where id = ?"),[t]);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),g=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,e,"todos")}return Object(s["a"])(n,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._db.query("\n      create table if not exists todos (\n        id integer primary key autoincrement,\n        title text,\n        description text,\n        done Boolean,\n        group_id integer,\n        foreign key (group_id)\n          references groups (id)\n            on delete set null\n            on update no action\n      )\n    ");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readItems",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])(Object(d["a"])(n.prototype),"readItems",this).call(this);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return Object(u["a"])(Object(u["a"])({},e),{},{done:!!e.done})})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"done"in r&&(r.done=r.done?1:0),e.next=3,Object(l["a"])(Object(d["a"])(n.prototype),"updateItem",this).call(this,t,r);case 3:return i=e.sent,e.abrupt("return",Object(u["a"])(Object(u["a"])({},i),{},{done:!!i.done}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(h),b=function(e){Object(p["a"])(n,e);var t=Object(f["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,e,"groups")}return Object(s["a"])(n,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this._db.query("\n      create table if not exists groups (\n        id integer primary key autoincrement,\n        name text\n      )\n    ");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])(Object(d["a"])(n.prototype),"deleteItem",this).call(this,t);case 2:return e.next=4,this._db.query("update todos set group_id = null where group_id = ?",[t]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(h),_=function(){function e(){Object(c["a"])(this,e),this.db=null}return Object(s["a"])(e,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.db=openDatabase("db","0.1","Db with todos",2e5),this.todos=new g(this),this.groups=new b(this),e.next=5,this.groups.init();case 5:return e.next=7,this.todos.init();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"query",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:[],e.abrupt("return",new Promise((function(e,i){r.db.transaction((function(r){console.log('[SQL] Executing: "'.concat(t,'"\nParams:'),n),r.executeSql(t,n,(function(t,n){return e(n)}),(function(e,t){return i(t)}))}),null,i)})));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),w=new _,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},e._l(e.filteredGroupedTodos,(function(t){var r=t[0],i=t[1];return n("group",{key:r,attrs:{"group-id":r}},e._l(i,(function(e){return n("ticket",{key:e.id,staticClass:"board__todo",attrs:{source:e}})})),1)})),1)},k=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board-group",class:{"board-group--null":!e.group}},[n("div",{staticClass:"board-group__name"},[e.isEditing?[n("div",{staticClass:"board-group__name-input-label"},[e._v(" Имя группы ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]:[e._v(" "+e._s(e.group?e.group.name||"Группа без имени":"Карточки вне групп")+" ")],e.group?n("div",{staticClass:"board-group__name-actions"},[e.isEditing?[n("button",{attrs:{disabled:!e.changes},on:{click:function(t){return e.saveChanges()}}},[e._v(" Сохранить ")]),n("button",{on:{click:function(t){e.name=e.group.name,e.isEditing=!1}}},[e._v(" Отмена ")])]:[n("button",{on:{click:function(t){e.isEditing=!0}}},[e._v(" Изменить имя группы ")])]],2):e._e()],2),n("div",{staticClass:"board-group__content"},[e._t("default",[e._v(" Здесь пока нет ни одной карточки. Нажмите снизу кнопку «Добавить карточку» ")])],2),n("div",{staticClass:"board-group__actions"},[n("button",{on:{click:function(t){return e.createTodo()}}},[e._v(" Добавить карточку ")]),e.group?n("button",{on:{click:function(t){e.confirmDeletion=!0}}},[e._v(" Удалить группу ")]):e._e()]),n("confirm",{attrs:{active:e.confirmDeletion},on:{confirmed:function(t){return e.deleteGroup()},cancelled:function(t){e.confirmDeletion=!1}}},[e._v(" Вы действительно хотите удалить группу? Карточки из этой группы не будут удалены. ")]),e.isTransposingTodo?n("div",{staticClass:"board-group__transposing-overlay",on:{click:function(t){e.isTransposingTargetInThisGroup?e.clearTodoTransposing():e.transposeTodo()}}},[e.isTransposingTargetInThisGroup?[e._v(" Оставить здесь ")]:[e._v(" Переместить сюда ")]],2):e._e()],1)},x=[],y=(n("b0c0"),n("a9e3"),n("2f62")),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.active?n("div",{staticClass:"confirm__overlay",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("cancelled")}}},[n("div",{staticClass:"confirm__card"},[n("div",{staticClass:"confirm__card-title"},[e._v(" Подтвердите действие ")]),n("div",{staticClass:"confirm__card-content"},[e._t("default")],2),n("div",{staticClass:"confirm__card-actions"},[n("button",{on:{click:function(t){return e.$emit("confirmed")}}},[e._v(" Подтверждаю ")]),n("button",{on:{click:function(t){return e.$emit("cancelled")}}},[e._v(" Отмена ")])])])]):e._e()},R=[],C={name:"Confirm",props:{active:Boolean}},I=C,D=(n("8b5e"),n("2877")),E=Object(D["a"])(I,T,R,!1,null,"0137ec1b",null),$=E.exports,S={name:"BoardGroup",components:{Confirm:$},props:{groupId:Number},data:function(){return{name:null,confirmDeletion:!1,isEditing:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(y["c"])(["groupsMap","isTransposingTodo","transposingTarget"])),{},{group:function(){return this.groupsMap[this.groupId]||null},changes:function(){return this.group&&this.group.name!==this.name?{name:this.name}:null},isTransposingTargetInThisGroup:function(){var e=this.transposingTarget||{},t=e.group_id,n=void 0===t?null:t;return n===this.groupId}}),created:function(){this.group&&(this.name=this.group.name)},methods:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(y["d"])(["clearTodoTransposing"])),Object(y["b"])(["fetchData"])),{},{createTodo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.todos.createItem({group_id:e.groupId});case 2:return t.next=4,e.fetchData();case 4:case"end":return t.stop()}}),t)})))()},saveChanges:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.groups.updateItem(e.groupId,e.changes);case 2:return t.next=4,e.fetchData();case 4:e.isEditing=!1;case 5:case"end":return t.stop()}}),t)})))()},deleteGroup:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.groups.deleteItem(e.groupId);case 2:return t.next=4,e.fetchData();case 4:case"end":return t.stop()}}),t)})))()},transposeTodo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.todos.updateItem(e.transposingTarget.id,{group_id:e.groupId});case 2:return t.next=4,e.fetchData();case 4:e.clearTodoTransposing();case 5:case"end":return t.stop()}}),t)})))()}})},q=S,P=(n("4fa1"),Object(D["a"])(q,O,x,!1,null,"0bac5e0e",null)),G=P.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ticket",class:{"ticket--done":e.done,"ticket--blinking":e.source.id===e.transposingTodoId}},[n("div",[e.isEditing?n("div",{staticClass:"ticket__inputs"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"done"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.done)?e._i(e.done,null)>-1:e.done},on:{change:function(t){var n=e.done,r=t.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&(e.done=n.concat([o])):a>-1&&(e.done=n.slice(0,a).concat(n.slice(a+1)))}else e.done=i}}}),n("div",{staticClass:"ticket__title-description"},[n("div",{staticClass:"ticket__input-label"},[e._v(" Название ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),n("div",{staticClass:"ticket__input-label"},[e._v(" Описание ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])]):n("div",{staticClass:"ticket__preview"},[n("div",{staticClass:"ticket__preview-check"},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.done}})]),n("div",{staticClass:"ticket__preview-content"},[n("div",{staticClass:"ticket__preview-title",class:{"text--secondary":!e.title}},[e._v(" "+e._s(e.title||"Без названия")+" ")]),n("div",{staticClass:"ticket__preview-description",class:{"text--secondary":!e.description}},[e._v(" "+e._s(e.description||"Без описания")+" ")])])])]),n("div",{staticClass:"ticket__actions"},[e.isEditing?[n("button",{attrs:{disabled:!e.changes},on:{click:function(t){return e.saveChanges()}}},[e._v(" Сохранить ")]),n("button",{on:{click:function(t){e.resetSourceData(),e.isEditing=!1}}},[e._v(" Отмена ")])]:[n("button",{on:{click:function(t){e.isEditing=!0}}},[e._v(" Изменить ")]),n("button",{on:{click:function(t){return e.$store.commit("activateTodoTransposing",e.source.id)}}},[e._v(" Переместить ")]),n("button",{on:{click:function(t){e.confirmDeletion=!0}}},[e._v(" Удалить ")])]],2),n("confirm",{attrs:{active:e.confirmDeletion},on:{confirmed:function(t){return e.deleteTodo()},cancelled:function(t){e.confirmDeletion=!1}}},[e._v(" Вы действительно хотите удалить карточку? ")])],1)},F=[],M=(n("4160"),n("c1f9"),{name:"Ticket",components:{Confirm:$},props:{source:{type:Object,required:!0}},data:function(){return{done:null,title:null,description:null,isEditing:!1,confirmDeletion:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(y["e"])(["transposingTodoId"])),{},{changes:function(){var e=this,t=[];return["title","done","description"].forEach((function(n){e.$data[n]!==e.source[n]&&t.push([n,e.$data[n]])})),0===t.length?null:Object.fromEntries(t)}}),created:function(){this.resetSourceData()},methods:{resetSourceData:function(){var e=this;["done","title","description"].forEach((function(t){e.$data[t]=e.source[t]}))},saveChanges:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.todos.updateItem(e.source.id,e.changes);case 2:e.$store.dispatch("fetchData"),e.isEditing=!1;case 4:case"end":return t.stop()}}),t)})))()},deleteTodo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.todos.deleteItem(e.source.id);case 2:e.$store.dispatch("fetchData");case 3:case"end":return t.stop()}}),t)})))()}}}),N=M,B=(n("ff69"),Object(D["a"])(N,A,F,!1,null,"04c91b7d",null)),W=B.exports,L={name:"Board",components:{Group:G,Ticket:W},computed:Object(u["a"])({},Object(y["c"])(["filteredGroupedTodos"]))},Q=L,J=(n("b16e"),Object(D["a"])(Q,j,k,!1,null,"a159f9ac",null)),z=J.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filters"},[n("div",{staticClass:"filters__title"},[e._v(" Фильтры "),e.isResetAvailable?n("span",{staticClass:"filters__attention"},[e._v(" активны ")]):e._e()]),n("div",{staticClass:"filters__label"},[e._v(" Название карточки ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],attrs:{placeholder:"Любое название"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),n("div",{staticClass:"filters__label"},[e._v(" Статус выполнения ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.done,expression:"done"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.done=t.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"none"}},[e._v("Любой статус выполнения")]),n("option",{domProps:{value:!1}},[e._v("Не выполнены")]),n("option",{domProps:{value:!0}},[e._v("Выполнены")])]),n("button",{attrs:{disabled:!e.isResetAvailable},on:{click:function(t){return e.$store.commit("resetFilters")}}},[e._v(" Сброс ")])])},K=[];n("ac1f"),n("5319");function U(e,t){var n;return function(){for(var r=this,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}}var V=/[-/\\^$*+?.()|[\]{}]/g.compile();function X(e){return e.replace(V,"\\$&")}var Y={name:"Filters",computed:{isResetAvailable:function(){return this.title||"none"!==this.done},title:{get:function(){return this.$store.state.filterTodoTitle},set:U((function(e){this.$store.commit("updateTitleFilter",e)}),700)},done:{get:function(){var e=this.$store.state.filterTodoDone;return null===e?"none":e},set:function(e){var t="none"===e?null:e;this.$store.commit("updateDoneFilter",t)}}}},Z=Y,ee=(n("e394"),Object(D["a"])(Z,H,K,!1,null,"4c3e0ba7",null)),te=ee.exports,ne={name:"App",components:{Board:z,Filters:te},data:function(){return{isWebSqlSupported:!0}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.init();case 3:t.next=10;break;case 5:return t.prev=5,t.t0=t["catch"](0),console.error(t.t0),e.isWebSqlSupported=!1,t.abrupt("return");case 10:return t.next=12,e.$store.dispatch("fetchData");case 12:case"end":return t.stop()}}),t,null,[[0,5]])})))()},methods:{addGroup:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,w.groups.createItem();case 2:return t.next=4,e.$store.dispatch("fetchData");case 4:case"end":return t.stop()}}),t)})))()}}},re=ne,ie=(n("cf25"),Object(D["a"])(re,i,o,!1,null,null,null)),oe=ie.exports;n("a623"),n("4de4"),n("7db0"),n("4ec9"),n("4d63"),n("25f0"),n("159b"),n("ddb0");r["a"].use(y["a"]);var ae=new y["a"].Store({state:function(){return{groups:[],todos:[],filterTodoTitle:null,filterTodoDone:null,transposingTodoId:null}},getters:{groupsMap:function(e){return Object.fromEntries(e.groups.map((function(e){return[e.id,e]})))},groupedTodos:function(e){var t=new Map([null].concat(Object(v["a"])(e.groups.map((function(e){return e.id})))).map((function(e){return[e,[]]})));return e.todos.forEach((function(e){var n=e.group_id;t.get(t.has(n)?n:null).push(e)})),Object(v["a"])(t)},filteredGroupedTodos:function(e,t){var n=[];if(e.filterTodoTitle){var r=X(e.filterTodoTitle),i=new RegExp(r,"i");n.push((function(e){return i.test(e.title)}))}return null!==e.filterTodoDone&&n.push((function(t){return t.done===e.filterTodoDone})),n.length?t.groupedTodos.map((function(e){var t=Object(m["a"])(e,2),r=t[0],i=t[1];return[r,i.filter((function(e){return n.every((function(t){return t(e)}))}))]})):t.groupedTodos},isTransposingTodo:function(e){return!!e.transposingTodoId},transposingTarget:function(e){return e.todos.find((function(t){return t.id===e.transposingTodoId}))}},mutations:{setData:function(e,t){var n=t.groups,r=t.todos;e.groups=n,e.todos=r},updateTitleFilter:function(e,t){e.filterTodoTitle=t},updateDoneFilter:function(e,t){e.filterTodoDone=t},resetFilters:function(e){e.filterTodoDone=null,e.filterTodoTitle=null},activateTodoTransposing:function(e,t){e.transposingTodoId=t},clearTodoTransposing:function(e){e.transposingTodoId=null}},actions:{fetchData:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Promise.all([w.groups.readItems(),w.todos.readItems()]);case 3:r=t.sent,i=Object(m["a"])(r,2),o=i[0],a=i[1],n("setData",{groups:o,todos:a});case 8:case"end":return t.stop()}}),t)})))()}}});r["a"].config.productionTip=!1,new r["a"]({store:ae,render:function(e){return e(oe)}}).$mount("#app")},"8b5e":function(e,t,n){"use strict";var r=n("17f8"),i=n.n(r);i.a},b16e:function(e,t,n){"use strict";var r=n("dbae"),i=n.n(r);i.a},cf25:function(e,t,n){"use strict";var r=n("fea6"),i=n.n(r);i.a},dbae:function(e,t,n){},e394:function(e,t,n){"use strict";var r=n("4e5c"),i=n.n(r);i.a},f0ca:function(e,t,n){},fea6:function(e,t,n){},ff69:function(e,t,n){"use strict";var r=n("f0ca"),i=n.n(r);i.a}});
//# sourceMappingURL=app.1bfd1c04.js.map